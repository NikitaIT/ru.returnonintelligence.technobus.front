function getLanguage(e){$.getJSON("lang/"+e+".json",function(e){$.each(e,function(e,t){$("[name = "+e+"]").html(t)})})}function initSlick(){$(".timetable__row--subrow").slick({arrows:!1,dots:!1,infinite:!1,variableWidth:!0,speed:200,slidesToScroll:7,responsive:[{breakpoint:1024,settings:{variableWidth:!1,slidesToShow:6,slidesToScroll:4}},{breakpoint:600,settings:{variableWidth:!1,slidesToShow:5,slidesToScroll:4}},{breakpoint:480,settings:{variableWidth:!1,slidesToShow:4,slidesToScroll:4}}]})}$(function(){$(".russian").button("toggle"),$(".russian").click(function(){getLanguage("ru"),$("#map").attr("lang","ru")}),$(".russian").click(),$(".english").click(function(){getLanguage("en"),$("#map").attr("lang","en")}),$(".lang").addClass("btn-group-vertical"),$(".lang").removeClass("btn-group"),$(".to_technopolis").button("toggle"),$(".to_technopolis").click(function(){$("#route0").css("visibility","visible"),$("#route0").css("position","initial"),$("#route1").css("visibility","hidden"),$("#route1").css("position","absolute")}),$(".from_technopolis").click(function(){$("#route0").css("visibility","hidden"),$("#route0").css("position","absolute"),$("#route1").css("visibility","visible"),$("#route1").css("position","initial")})}),$(function(){function e(){var e={hour:"numeric",minute:"numeric"},t=new Date,o=t.toLocaleString("ru",e)+" ";$("time.current-time").html(o),$(".day").attr("name",function(e){return["sunday","monday","tuesday","tednesday","thursday","friday","saturday"][e.getDay()]}(t))}e(),setInterval(e,1e3)}),$(function(){function e(){function e(e,t){ymaps.route([{point:e,type:"viaPoint"},t]).then(function(e){s.geoObjects.add(r=e)},function(e){alert("Возникла ошибка: "+e.message)})}function t(){l.isSelected()&&(r&&s.geoObjects.remove(r),e(i,n))}var o={metro:[59.853876,30.321102],technopolis:[59.818043,30.327938],metro1:[59.850127,30.321772],routeCenter:[59.835681,30.322253]},i=o.metro,n=o.technopolis,s=new ymaps.Map("map",{center:o.metro,zoom:16},{searchControlProvider:"yandex#search"}),a=new ymaps.Placemark(s.getCenter());s.geoObjects.add(a);var r,l=new ymaps.control.Button('<div name="route_show">Показать маршрут</div>');l.events.add("select",function(){e(i,n),s.setZoom(12),s.setCenter(o.routeCenter),l.data.set("content",'<div name="route_hide"></div>'),getLanguage($("#map").attr("lang"))}).add("deselect",function(){r&&s.geoObjects.remove(r),l.data.set("content",'<div name="route_show"></div>'),getLanguage($("#map").attr("lang"))}),s.controls.add(l,{float:"left",maxWidth:"auto"}),a.events.add("mouseenter",function(e){e.get("target").options.set("preset","islands#greenIcon")}).add("mouseleave",function(e){e.get("target").options.unset("preset")}),$("#from").click(function(){s.setCenter(o.technopolis),a.geometry.setCoordinates(s.getCenter()),i=o.technopolis,n=o.metro1,t(),s.setZoom(16)}),$("#to").click(function(){s.setCenter(o.metro),a.geometry.setCoordinates(s.getCenter()),i=o.metro,n=o.technopolis,t(),s.setZoom(16)})}ymaps.ready(e)}),$(function(){function e(e,t,o){function i(e){var t="";for(var o in e)void 0!==s[o]&&(t+='<div  class="timetable__min day'+e[o]+'">'+e.id+":"+s[o]+"</div>");return t}var n="",s={b:"00",c:"05",d:10,e:15,f:20,g:25,h:30,i:35,j:40,k:45,l:50,m:55};n+='<div class="timetable__row__current" id="route'+o+'">',e.items.forEach(function(e,t,o){var s=i(e);""!==s&&(n+='<div class="timetable__row"><div class="timetable__hover " style="background: #FF9101">'+e.id+'</div><hr class="line"/><div class="timetable__row--subrow">'+s+"</div></div>")}),n+="</div>",$(t).append(n)}var t="https://docs.google.com/spreadsheet/pub?key=1VwgzSFxVRu2Z-9tvF8wimO2m3BmuW4ngcST5uGSRYRg&output=html",o=new GoogleSpreadsheet;o.url(t),o.load(function(t){console.log(t),e(t,".timetable__row__all",0)});var o=new GoogleSpreadsheet;o.url(t+"&gid=1453141125"),o.load(function(t){console.log(t),e(t,".timetable__row__all",1)}),setTimeout(initSlick,1e3),setTimeout(tabSelect,1e3),getLanguage("ru")});