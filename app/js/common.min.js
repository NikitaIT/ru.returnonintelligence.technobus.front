function getLanguage(e){$.getJSON("lang/"+e+".json",function(e){$.each(e,function(e,t){$("[name = "+e+"]").html(t)})})}function initSlick(){$(".timetable__row--subrow").slick({arrows:!1,dots:!1,infinite:!0,variableWidth:!0,speed:200,slidesToScroll:7,responsive:[{breakpoint:1024,settings:{variableWidth:!1,slidesToShow:6,slidesToScroll:4}},{breakpoint:600,settings:{variableWidth:!1,slidesToShow:5,slidesToScroll:4}},{breakpoint:480,settings:{variableWidth:!1,slidesToShow:4,slidesToScroll:4}}]})}function tabSelect(){$(".timetable__header").click(function(){$(this).css("background","#FEFCD7"),$(this).css("color","#B23302"),"to"===$(this).attr("id")?($("#from").css("background","#FEDEB7"),$("#from").css("color","#D9A414"),$("#route0").css("visibility","visible"),$("#route0").css("position","initial"),$("#route1").css("visibility","hidden"),$("#route1").css("position","absolute")):($("#to").css("background","#FEDEB7"),$("#to").css("color","#D9A414"),$("#route0").css("visibility","hidden"),$("#route0").css("position","absolute"),$("#route1").css("visibility","visible"),$("#route1").css("position","initial"))})}$(function(){new DG.OnOffSwitch({el:"#on-off-switch-notext"}),new DG.OnOffSwitch({el:"#on-off-switch",textOn:"Ru",textOff:"En",listener:function(e,t){getLanguage(t?"ru":"en")}})}),$(function(){$(".russian").button("toggle"),$(".russian").click(function(){getLanguage("ru")}),$(".english").click(function(){getLanguage("en")})}),$(function(){function e(){var e={hour:"numeric",minute:"numeric"},t=new Date,o=t.toLocaleString("ru",e)+" ";$("time.current-time").html(o),$(".description-text.day").attr("name",function(e){return["sunday","monday","tuesday","tednesday","thursday","friday","saturday"][e.getDay()]}(t))}e(),setInterval(e,1e3)}),$(function(){function e(){function e(e,t){ymaps.route([{point:e,type:"viaPoint"},t]).then(function(e){s.geoObjects.add(a=e)},function(e){alert("Возникла ошибка: "+e.message)})}function t(){c.isSelected()&&(a&&s.geoObjects.remove(a),e(n,i))}var o={metro:[59.853876,30.321102],technopolis:[59.818043,30.327938],metro1:[59.850127,30.321772],routeCenter:[59.835681,30.322253]},n=o.metro,i=o.technopolis,s=new ymaps.Map("map",{center:o.metro,zoom:16},{searchControlProvider:"yandex#search"}),r=new ymaps.Placemark(s.getCenter());s.geoObjects.add(r);var a,c=new ymaps.control.Button("Показать маршрут");c.events.add("select",function(){e(n,i),s.setZoom(12),s.setCenter(o.routeCenter),c.data.set("content","Скрыть маршрут")}).add("deselect",function(){a&&s.geoObjects.remove(a),c.data.set("content","Показать маршрут")}),s.controls.add(c,{float:"left",maxWidth:"auto"}),r.events.add("mouseenter",function(e){e.get("target").options.set("preset","islands#greenIcon")}).add("mouseleave",function(e){e.get("target").options.unset("preset")}),$("#from").click(function(){s.setCenter(o.technopolis),r.geometry.setCoordinates(s.getCenter()),n=o.technopolis,i=o.metro1,t(),s.setZoom(16)}),$("#to").click(function(){s.setCenter(o.metro),r.geometry.setCoordinates(s.getCenter()),n=o.metro,i=o.technopolis,t(),s.setZoom(16)})}ymaps.ready(e)}),$(function(){function e(e,t,o){function n(e){var t="";for(var o in e)void 0!==s[o]&&(t+='<div  class="timetable__min day'+e[o]+'">'+e.id+":"+s[o]+"</div>");return t}var i="",s={b:"00",c:"05",d:10,e:15,f:20,g:25,h:30,i:35,j:40,k:45,l:50,m:55};i+='<div class="timetable__row__current" id="route'+o+'">',e.items.forEach(function(e,t,o){var s=n(e);""!==s&&(i+='<div class="timetable__row"><div class="timetable__hover " style="background: #FF9101">'+e.id+'</div><hr/><div class="timetable__row--subrow">'+s+"</div></div>")}),i+="</div>",$(t).append(i)}var t="https://docs.google.com/spreadsheet/pub?key=1VwgzSFxVRu2Z-9tvF8wimO2m3BmuW4ngcST5uGSRYRg&output=html",o=new GoogleSpreadsheet;o.url(t),o.load(function(t){console.log(t),e(t,".timetable__row__all",0)});var o=new GoogleSpreadsheet;o.url(t+"&gid=1453141125"),o.load(function(t){console.log(t),e(t,".timetable__row__all",1)}),setTimeout(initSlick,1e3),setTimeout(tabSelect,1e3),getLanguage("ru")});