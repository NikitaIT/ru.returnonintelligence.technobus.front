function getLanguage(e){$.getJSON("lang/"+e+".json",function(e){$.each(e,function(e,t){$("[name = "+e+"]").html(t)})})}$(window).load(function(){$(".preloader").delay(1e3).fadeOut("slow")});var days=["sunday","monday","tuesday","tednesday","thursday","friday","saturday"];$(function(){$(".russian").button("toggle"),$(".russian").click(function(){getLanguage("ru"),$("#map").attr("lang","ru")}),$(".russian").click(),$(".english").click(function(){getLanguage("en"),$("#map").attr("lang","en")}),$(".lang").addClass("btn-group-vertical"),$(".lang").removeClass("btn-group"),$(".to_technopolis").button("toggle"),$(".to_technopolis").click(function(){$("#route0").css("visibility","visible"),$("#route0").css("position","initial"),$("#route1").css("visibility","hidden"),$("#route1").css("position","absolute")}),$(".from_technopolis").click(function(){$("#route0").css("visibility","hidden"),$("#route0").css("position","absolute"),$("#route1").css("visibility","visible"),$("#route1").css("position","initial")})}),$(function(){function e(){var e={hour:"numeric",minute:"numeric"},t=new Date,o=t.toLocaleString("ru",e)+" ",n=function(e){return days[e.getDay()]}(t);$(".day").attr("name",n),$("time.current-time").html(o);var i=t.getMinutes();Number.prototype.div=function(e){return(this-this%e)/e};var a=i>=10?i.div(10)+1+"0":"10";console.log(a),$(".timetable__min:contains("+t.getHours()+":"+a+")").css("border","2px solid green")}!function(){var e="";days.forEach(function(t,o,n){e+='<div class="panel--button panel--button-'+o+" day-"+t+' "><span name="'+t+'"></span></div>'}),$(".panel").append(e)}(),e(),setInterval(e,9e3)}),$(function(){function e(){function e(e,t){ymaps.route([{point:e,type:"viaPoint"},t]).then(function(e){a.geoObjects.add(r=e)},function(e){alert("Возникла ошибка: "+e.message)})}function t(){l.isSelected()&&(r&&a.geoObjects.remove(r),e(n,i))}var o={metro:[59.853876,30.321102],technopolis:[59.818043,30.327938],metro1:[59.850127,30.321772],routeCenter:[59.835681,30.322253]},n=o.metro,i=o.technopolis,a=new ymaps.Map("map",{center:o.metro,zoom:16},{searchControlProvider:"yandex#search"}),s=new ymaps.Placemark(a.getCenter());a.geoObjects.add(s);var r,l=new ymaps.control.Button('<i class="fa fa-bus" style="color: dimgray"></i>');l.events.add("select",function(){e(n,i),a.setZoom(12),a.setCenter(o.routeCenter)}).add("deselect",function(){r&&a.geoObjects.remove(r)}),a.controls.add(l,{float:"left",maxWidth:"auto"}),s.events.add("mouseenter",function(e){e.get("target").options.set("preset","islands#greenIcon")}).add("mouseleave",function(e){e.get("target").options.unset("preset")}),$(".from_technopolis").click(function(){a.setCenter(o.technopolis),s.geometry.setCoordinates(a.getCenter()),n=o.technopolis,i=o.metro1,t(),a.setZoom(16)}),$(".to_technopolis").click(function(){a.setCenter(o.metro),s.geometry.setCoordinates(a.getCenter()),n=o.metro,i=o.technopolis,t(),a.setZoom(16)})}ymaps.ready(e)}),$(function(){function e(e,t,o){function n(e){var t="";for(var o in e)void 0!==a[o]&&(t+='<div  class="timetable__min '+function(e){var t=["Su","Mo","Tu","Te","Th","Fr","Sa","All"];if("All"===e){var o="";return days.forEach(function(e,t,n){o+=" day-"+e}),o+" day-All"}return void 0===t.indexOf(e)?(console.error("tableDayName is undefined")," "):" day-"+days[t.indexOf(e)]}(e[o])+'">'+e.id+":"+a[o]+"</div>");return t}console.log("f: addTableList(id="+o+")");var i="",a={b:"00",c:"05",d:10,e:15,f:20,g:25,h:30,i:35,j:40,k:45,l:50,m:55};i+='<div class="timetable__row__current" id="route'+o+'">',e.items.forEach(function(e,t,o){var a=n(e);""!==a&&(i+='<div class="timetable__row"><div class="timetable__hover ">'+e.id+'</div><hr class="line"/><div class="timetable__row--subrow">'+a+"</div></div>")}),i+="</div>",console.log($(t)),$(t).append(i)}var t="https://docs.google.com/spreadsheet/pub?key=1VwgzSFxVRu2Z-9tvF8wimO2m3BmuW4ngcST5uGSRYRg&output=html",o=new GoogleSpreadsheet;o.url(t),o.load(function(t){console.log(t),e(t,".timetable__row__all",0)});var o=new GoogleSpreadsheet;o.url(t+"&gid=1453141125"),o.load(function(t){console.log(t),e(t,".timetable__row__all",1)}),getLanguage("ru")});